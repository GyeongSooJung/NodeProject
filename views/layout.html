<!DOCTYPE html>
<html lang="kor">
<head>
	<meta charset="utf-8" />
	<title>{{__('main_title')}}</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />
	<meta content="" name="description" />
	<meta content="" name="author" />
	
	<!-- ================== BEGIN BASE CSS STYLE ================== -->
	<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700" rel="stylesheet" />
	<link href="../assets/css/default/app.min.css" rel="stylesheet" />
	<link href="../assets/plugins/flag-icon-css/css/flag-icon.min.css" rel="stylesheet" />
	<link href="../oasiscss/oasis.css" rel="stylesheet" />
	<!-- ================== END BASE CSS STYLE ================== -->
	
	{% block css %}
	{% endblock %}
	
	<link href="../assets/img/favicon.png" rel="icon">
</head>
<body>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
	<!--오아시스 제이쿼리 자바스크립트-->
	<script src="../oasisjs/oasisjquery.js"></script>
	<script src="../oasisjs/oasis_list_collection.js"></script>
	<script src="../oasisjs/oasis_list_edit_delete.js"></script>
	<script src="../oasisjs/oasis_list_search_sort.js"></script>
	<script src="../oasisjs/oasis_list_pagenation.js"></script>
	
	<!-- begin #page-loader -->
	<div id="page-loader" class="fade show">
		<span class="spinner"></span>
	</div>
	<!-- end #page-loader -->
	
	<!-- begin #page-container -->
	<div id="page-container" class="page-container fade page-sidebar-fixed page-header-fixed">
		<!-- begin #header -->
		<div id="header" class="header navbar-default">
			<!-- begin navbar-header -->
			<div class="navbar-header">
				<a href="/main" class="navbar-brand ml-3"><img src="../assets/img/oasis.png"></a>
				
			</div>
			<div class="navbar-nav navbar-right">
				{% if noticethree %}
				<div class="d-flex justify-content-center align-items-center font-weight-bold">
					<p class="width-80 mb-0 height-20">공지사항 &nbsp;:&nbsp;</p>
					<div class="notice overflow-hidden height-20">
						<ul class="rolling position-relative mb-0">
							{% for notice in noticethree %}
							<li class="height-20 mb-0">
								<a href="#" onclick="noticepop(this)" name="{{notice._id}}">{{notice.TI}}</a>
							</li>
							{% endfor %}
						</ul>
					</div>
				</div>
				{% else %}
				{% endif %}
			</div>
			<!-- end navbar-header -->
			<!-- begin header-nav -->
			<ul class="navbar-nav navbar-right">
				<li class="dropdown navbar-user">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown">
						<span class="d-none d-md-inline font-weight-bold">{{company.CNA}}</span>
						<span class="font-weight-bold">({{__('main_point')}} : <span id="pointbox" class="text-primary">{{company.SPO}} p</span>)</span>
						<b class="caret"></b>
					</a>
					<div class="dropdown-menu dropdown-menu-right">
						<a href="/profile" class="dropdown-item">{{__('layout_modify')}}</a>
						<a href="/setting" class="dropdown-item">{{__('layout_setting')}}</a>
						<div class="dropdown-divider"></div>
						<a href="/shop" class="dropdown-item">{{__('layout_payment_point_purchase')}}</a>
						<a href="javascript:logout()" class="dropdown-item">{{__('layout_signout')}}</a>
						<a href="javascript:withdrawal()" class="dropdown-item">{{__('layout_withdrawal')}}</a>
					</div>
				</li>
				<li class="dropdown navbar-user">
					<a href="#" class="dropdown-toggle mr-3" data-toggle="dropdown">
						<h2 class="flag-icon width-full m-r-10 m-t-0 m-b-3 px-1" id="flag"></h2>
					</a>
					<div class="dropdown-menu dropdown-menu-right">
						<a href="/ko" class="dropdown-item"><span class="flag-icon flag-icon-kr mr-2 px-1" title="kr" id="kr"></span>{{__('lang_kr')}}</a>
						<a href="/en" class="dropdown-item"><span class="flag-icon flag-icon-us mr-2 px-1" title="us" id="us"></span>{{__('lang_en')}}</a>
					</div>
				</li>
			</ul>
			<!-- end header-nav -->
		</div>
		<!-- end #header -->
		
		<!-- begin #sidebar -->
		<div id="sidebar" class="sidebar">
			<!-- begin sidebar scrollbar -->
			<div id="active-menu" data-scrollbar="true" data-height="100%">
				<ul class="nav">
				<li><a href="javascript:;" class="sidebar-minify-btn" data-click="sidebar-minify"><i class="fa fa-angle-double-left"></i></a></li>
					<li class="has-sub">
						<a href="/notice_list">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-volume-up"></i>
							<span> {{__('notice_list')}} </span> 
						</a>
					</li>
					<!--사업자만-->
					{% if(company.AH == true) %}
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-building"></i>
							<span> {{__('company')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/company_list">{{__('company_list')}}</a></li>
						</ul>
					</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-chart-bar"></i>
							<span> {{__('statistics')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/device_static">{{__('statistics_device')}}</a></li>
							<li><a href="/history_static">{{__('statistics_history')}}</a></li>
							</ul>
							</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-chart-bar"></i>
							<span> {{__('statistics')}} 테스트 </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/device_static2">{{__('statistics_device')}}</a></li>
							<li><a href="/history_static2">{{__('statistics_history')}}</a></li>
							</ul>
							</li>
					<li class="has-sub">
							<a href="javascript:;">
								<b class="caret"></b>
								<i class="fab fa-lg fa-fw m-r-10 fa-python"></i>
								<span>Python/R</span> 
							</a>
						<ul class="sub-menu">	
							<li><a href="/ozone_spread"  target="_blank">3D Scatter Plot <br> (OZone Spreading)</a></li>

						</ul>
					</li>					
					{% else %}
					{% endif %}
					<!--//-->
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-microchip"></i>
							<span> {{__('device')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/device_join">{{__('layout_device_register')}}</a></li>
							<li><a href="/device_list">{{__('layout_device_list')}}</a></li>
						</ul>
					</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-car"></i>
							<span> {{__('car')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/car_join">{{__('layout_car_register')}}</a></li>
							<li><a href="/car_list">{{__('layout_car_list')}}</a></li>
						</ul>
					</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-user"></i>
							<span> {{__('worker')}}
								
								{% if (aclist.length >= 1) %}
								<span class="label label-theme">NEW</span>
								{% else %}
								{% endif %}
							</span>
						</a>
						<ul class="sub-menu">
							<li><a href="/worker_list">{{__('layout_worker_list')}}
							{% if aclist.length >=1 %}
							<span class="label label-theme">{{ aclist.length }}</span>
							{% else %}
							{% endif %}
							</a></li>
						</ul>
					</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-history"></i>
							<span> {{__('history')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/history_list">{{__('layout_history_list')}}</a></li>
						</ul>
					</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-shopping-cart m-r-10 fa-qrcode"></i>
							<span> {{__('layout_purchase')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/shop">{{__('layout_goods_purchase')}}</a></li>
							{% if(company.AH == true) or (company.CK == "MK 대리점") %}
							<li><a href="/shop">{{__('layout_goods_join')}}</a></li>
							{% else %}
							{% endif %}
							<li><a href="/pay_list">{{__('layout_purchase_list')}}</a></li>
							<li><a href="/point_list">{{__('layout_payment_point_usage')}}</a></li>
							<li><a href="/alarmtalk_list">{{__('layout_payment_alarmtalk')}}</a></li>
						</ul>
					</li>
					<li class="has-sub">
						<a href="javascript:;">
							<b class="caret"></b>
							<i class="fas fa-lg fa-fw m-r-10 fa-qrcode"></i>
							<span> {{__('qrcode')}} </span> 
						</a>
						<ul class="sub-menu">
							<li><a href="/publish_manage">{{__('layout_qrcode_man')}}</a></li>
							<li><a href="/inflow?cat=1">{{__('layout_qrcode_con')}}</a></li>
						</ul>
					</li>
				
					
					<!-- begin sidebar minify button -->
					
					<!-- end sidebar minify button -->
				</ul>
				<!-- end sidebar nav -->
			</div>
			<!-- end sidebar scrollbar -->
		</div>
		<div class="sidebar-bg"></div>
		<!-- end #sidebar -->
		
		<!-- begin #content -->
		{% block content %}
		{% endblock %}
		<!-- end #content -->
		
		<!-- begin scroll to top btn -->
		<a href="javascript:;" class="btn btn-icon btn-circle btn-success btn-scroll-to-top fade" data-click="scroll-top"><i class="fa fa-angle-up"></i></a>
		<!-- end scroll to top btn -->
	</div>
	<!-- end page container -->

<script src="/socket.io/socket.io.js"></script>
<script>
	window.addEventListener('load', function() {
		// 언어 변경시 국기 변환 기능
		var cookie = document.cookie;
		var startIndexOf = cookie.indexOf('lang');
		var endIndexOf = cookie.indexOf(';',startIndexOf);
		if(endIndexOf == -1)endIndexOf = cookie.length; //맨끝일경우;가 없으므로 맨마지막자리를 가져온다.
		
		const flag = document.getElementById('flag');
		var lang = cookie.substring(startIndexOf+'lang='.length, endIndexOf);
		console.log("쿠키"+cookie);
		console.log("언어"+lang);
		if(lang == 'ko') {
			flag.classList.add('flag-icon-kr');
		}
		else if(lang == 'en') {
			flag.classList.add('flag-icon-us');
		}
		else {
			flag.classList.add('flag-icon-kr');
		}
		
		// 메뉴 active 기능
		var path = document.location.pathname.toString();
		var cut =  path.split('/');
		if (cut[1] == 'car_edit') {
			cut[1] = 'car_list';
		}
		if (cut[1] == 'device_edit') {
			cut[1] = 'device_list';
		}
		if (cut[1] == 'history_chart') {
			cut[1] = 'history_list';
		}
		if (cut[1] == 'pay_confirm') {
			cut[1] = 'shop';
		}
		$('#active-menu').find('a[href="' + '/' + cut[1] + '"]').parents('li').addClass('active');
		
		// 공지사항 rolling 기능
		var height =  $(".notice").height();
		var num = $(".rolling li").length;
		var max = height * num;
		var move = 0;
		function noticeRolling(){
			move += height;
			$(".rolling").animate({"top":-move},600,function(){
				if( move >= max ){
					$(this).css("top",0);
					move = 0;
				};
			});
		};
		noticeRollingOff = setInterval(noticeRolling,2000);
		$(".rolling").append($(".rolling li").first().clone());
	
		$(".rolling_stop").click(function(){
			clearInterval(noticeRollingOff);
		});
		$(".rolling_start").click(function(){
			noticeRollingOff = setInterval(noticeRolling,1000);
		});
	});
	
	// 회원탈퇴 기능
	function withdrawal() {
		var answer;
		//페이지를 이동하기 전에 confirm()을 사용해 다시 한번 확인한다.
		//확인을 선택하면 answer에  true, 취소를 선택하면 false 값이 들어간다.
		answer = confirm("{{__('layout_withdrawal_confirm')}}");
		//확인을 선택한 경우 자바스크립트를 호출할 때 같이 넘어온 url이라는 변수에 들어있는 주소로 페이지 이동
		if(answer == true){
			location = '/auth/withdrawal';
		}
		else {
			location = '/main';
		}
	}
	
	// 로그아웃 기능
	function logout() {
		var answer;
		//페이지를 이동하기 전에 confirm()을 사용해 다시 한번 확인한다.
		//확인을 선택하면 answer에  true, 취소를 선택하면 false 값이 들어간다.
		answer = confirm("{{__('layout_signout_confirm')}}");
		//확인을 선택한 경우 자바스크립트를 호출할 때 같이 넘어온 url이라는 변수에 들어있는 주소로 페이지 이동
		if(answer == true){
			location = '/auth/logout';
		}
		else {
			location = '/main';
		}
	}
	// 공지사항
	function noticepop(obj) {
       var noticeid = $(obj).attr('name');
        if (noticeid)
        window.open("/noticepop?noticeid="+noticeid,"pop","width=620, height=700, scrollbars=yes, resizable=yes"); 
        else{
            alert("{{__('purchase_failed')}}");
        }   
    }
    
    var searcherror = function () {
    	return alert("{{__('search_error')}}");
    }
    var choiceerror = function () {
    	return alert("{{__('choice_error')}}");
    }
    var i18nconvert = function (string) {
    	if(string == "CN" ) {
    		return "{{__('car_number')}}";
    	} 
    	else if(string == "CPN" ) {
    		return "{{__('car_customer_phone')}}";
    	}
    	else if(string == "MD" ) {
    		return "{{__('device_model')}}";
    	} 
    	else if(string == "VER" ) {
    		return "{{__('device_version')}}";
    	} 
    	else if(string == "MAC" ) {
    		return "{{__('device_mac')}}";
    	} 
    	else if(string == "NN" ) {
    		return "{{__('device_nick')}}";
    	} 
    	else if(string == "UN" ) {
    		return "{{__('device_use_number')}}";
    	}
    	else if(string == "WN" ) {
    		return "{{__('name')}}";
    	}
    	else if(string == "PN" ) {
    		return "{{__('mobile_number')}}";
    	}
    	else if(string == "EM" ) {
    		return "{{__('email')}}";
    	}
    	else if(string == "WNM" ) {
    		return "{{__('worker')}}";
    	}
    	else if(string == "DNM" ) {
    		return "{{__('device_model')}}";
    	}
    	else if(string == "CNM" ) {
    		return "{{__('car_number')}}";
    	}
    	else if(string == "MID" ) {
    		return "{{__('payment_ordernumber')}}";
    	}
    	else if(string == "payCA" ) {
    		return "{{__('payment_date')}}";
    	}
    	else if(string == "GN" ) {
    		return "{{__('payment_name')}}";
    	}
    	else if(string == "payNum" ) {
    		return "{{__('payment_number')}}";
    	}
    	else if(string == "AM" ) {
    		return "{{__('payment_amount')}}";
    	}
    	else if(string == "pointN" ) {
    		return "{{__('payment_name')}}";
    	}
    	else if(string == "PO" ) {
    		return "{{__('payment_point')}}";
    	}
    	else if(string == "pointCA" ) {
    		return "{{__('payment_Dateofuse')}}";
    	}
    	else if(string == "payWNM" ) {
    		return "{{__('payment_sender')}}";
    	}
    	else if(string == "RE" ) {
    		return "{{__('payment_result')}}";
    	}
    	else if(string == "ET" ) {
    		return "{{__('history_date')}}";
    	}
    	else if(string == "CA" ) {
    		return "{{__('create_date')}}";
    	}
    	else if(string == "choiceerror" ) {
    		return "{{__('choice_error')}}";
    	} 
    	else if(string == "searcherror" ) {
    		return "{{__('search_error')}}";
    	}
    	else if(string == "deleteconfirm" ) {
    		return "{{__('delete_confirm')}}";
    	} 
    	else if(string == "deletesuccess" ) {
    		return "{{__('delete_success')}}";
    	} else if(string == "modify" ) {
    		return "{{__('modify')}}";
    	} 
    	else if(string == "delete" ) {
    		return "{{__('delete')}}";
    	} 
    	else if(string == "reset" ) {
    		return "{{__('reset')}}";
    	} 
    	else if(string == "car_length_error" ) {
    		return "{{__('car_length_error')}}";
    	}
    	else if(string == "car_type_error" ) {
    		return "{{__('car_type_error')}}";
    	}
    	else if(string == "car_exist_error" ) {
    		return "{{__('car_exist_error')}}";
    	}
    	else if(string == "modify_failed" ) {
    		return "{{__('modify_failed')}}";
    	}
    	else if(string == "car_modify_success" ) {
    		return "{{__('car_modify_success')}}";
    	}
    	else if(string == "modify_failed" ) {
    		return "{{__('modify_failed')}}";
    	}
    	else if(string == "device_modify_success" ) {
    		return "{{__('device_modify_success')}}";
    	}
    	else if(string == "device_edit_version_enter" ) {
    		return "{{__('device_edit_version_enter')}}";
    	}
    	else if(string == "device_edit_nick_enter" ) {
    		return "{{__('device_edit_nick_enter')}}";
    	}
    	else if(string == "search" ) {
    		return "{{__('search')}}";
    	}
    	else if(string == "approval" ) {
    		return "{{__('approval')}}";
    	}
    	else if(string == "owner_auth" ) {
    		return "{{__('owner_auth')}}";
    	}
    	else if(string == "main_indetail" ) {
    		return "{{__('main_indetail')}}";
    	}
    	else if(string == "payment_receit" ) {
    		return "{{__('payment_receit')}}";
    	}
    	else if(string == "purchase_failed" ) {
    		return "{{__('purchase_failed')}}";
    	}
    	else if(string == "PD" ) {
    		return "{{__('history_time')}}";
    	}
    	else if(string == "device_register_success" ) {
    		return "{{__('device_register_success')}}";
    	}
    	else if(string == "device_duplicated" ) {
    		return "{{__('device_duplicated')}}";
    	}
    	else if(string == "device_mac_wrong" ) {
    		return "{{__('device_mac_wrong')}}";
    	}
    	else if(string == "car_register_success" ) {
    		return "{{__('car_register_success')}}";
    	}
    	else if(string == "car_exceltype_error" ) {
    		return "{{__('car_exceltype_error')}}";
    	}
    	else if(string == "car_excellength_error" ) {
    		return "{{__('car_excellength_error')}}";
    	}
    	else if(string == "" ) {
    		return "{{__('')}}";
    	}
    	else if(string == "" ) {
    		return "{{__('')}}";
    	}
    	else if(string == "" ) {
    		return "{{__('')}}";
    	}
    	else if(string == "" ) {
    		return "{{__('')}}";
    	}
    	else {
    		return string;
    	}
    }
</script>

<!-- ================== BEGIN BASE JS ================== -->
<script src="../assets/js/app.min.js"></script>
<script src="../assets/js/theme/default.min.js"></script>
<!-- ================== END BASE JS ================== -->
{% block script %}
{% endblock %}
	
</body>
</html>