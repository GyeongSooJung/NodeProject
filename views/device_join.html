{% extends 'layout.html' %}

{% block content %}
<div id="content" class="content">
	<!-- begin page-header -->
	<h1 class="page-header">장치 등록</h1>
	<!-- end page-header -->
	<!-- begin row -->
	<div class="row">
		<!-- begin col-6 -->
		<div class="col-xl-12">
			<!-- begin panel -->
			<div class="panel panel-inverse" data-sortable-id="form-validation-1">
				<!-- begin panel-heading -->
				<div class="panel-heading d-flex justify-content-between">
					<h4 class="panel-title">소독기</h4>
					<p class="m-0">첨부파일 : </p>
						<span class="text-green font-weight-bold d-flex align-items-center">
							<a class="text-green" href="../assets/upload/장치 등록 양식.xlsx" download>
								<i class="far fa-lg fa-file-excel ml-2 mr-1"></i> 장치 등록 양식.xlsx
							</a>
						</span>
				</div>
				<!-- end panel-heading -->
				<!-- begin panel-body -->
				<div class="panel-body">
					<form id="device-form" action="/device/device_join" method="post" class="form-horizontal" data-parsley-validate="true" name="device-form">
					
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label" for="MD">모델명 * :</label>
							<div class="col-md-8 col-sm-8">
								<input class="form-control" type="text" id="MD" name="MD" placeholder="모델명을 입력하세요" data-parsley-required="true" data-parsley-error-message="필수 입력사항입니다."/>
							</div>
						</div>
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label" for="VER">버전 * :</label>
							<div class="col-md-8 col-sm-8">
								<input class="form-control" type="Number" id="VER" name="VER" placeholder="버전을 입력하세요" data-parsley-required="true" data-parsley-error-message="필수 입력사항입니다."/>
							</div>
						</div>
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label" for="MAC">맥 주소 * :</label>
							<div class="col-md-8 col-sm-8">
								<input class="form-control" type="String" id="MAC" name="MAC" onKeypress ="this.value = setComma(this.value)" placeholder="맥 주소를 형식대로 입력하세요 (11:22:33:44:55:66)" minlength=17 maxlength=17 data-parsley-required="true" data-parsley-error-message="필수 입력사항입니다."/>
							</div>
						</div>
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label" for="NN">별칭 :</label>
							<div class="col-md-8 col-sm-8">
								<input class="form-control" type="String" id="NN" name="NN" placeholder="별칭을 원하는대로 입력하세요." />
							</div>
						</div>
						<div class="form-group row m-b-0">
							<label class="col-md-4 col-sm-4 col-form-label">&nbsp;</label>
							<div class="col-md-8 col-sm-8">
								<button type="submit" class="btn btn-primary width-80">등록</button>
								<button type="reset" class="btn btn-primary width-80">초기화</button>
							</div>
						</div>
					</form>
				</div>
				<!-- Excel 파일 업로드 -->
				<div class="panel-body bg-grey pb-0">
					<form id="device-xlsx-form" action="/device/device_join_xlsx" method="post" enctype="multipart/form-data" class="form-horizontal"name="device-xlsx-form">
						<div class="form-group row m-b-15">
							<label class="col-md-4 col-sm-4 col-form-label text-green" for="file"><b># Excel 파일로 등록</b> :</label>
							<div class="col-md-8 col-sm-8">
								<input type="file" id="file" name="xlsx" /><button type="submit" class="btn btn-primary width-80">등록</button>
							</div>
						</div>
					</form>
				</div>
				<!-- end panel-body -->
			</div>
			<!-- end panel -->
		</div>
	</div>
	<!-- end row -->
</div>

<!-- Script -->
<script>
	// MAC주소 콜론 기능
	function setComma(str){
		//var MAC =document.getElementById('MAC')
	if((Number(str.length) % 3) ==2){
		
		if(Number(str.length) == 17){
			return str
		}
		return str+":"
		
	}
	
		return str;
	}
	
	// 에러 링크 기능
	window.onload = () => {
		if (new URL(location.href).searchParams.get('error')) {
			alert('이미 존재하는 MAC 입니다.');
		}
	
		if (new URL(location.href).searchParams.get('type')) {
			alert('MAC 주소를 정확히 입력해주세요.');
		}
		if (new URL(location.href).searchParams.get('excel')) {
			alert('파일이 잘못되었습니다. 형식 또는 양식을 확인해주세요');
		}
		if (new URL(location.href).searchParams.get('excelMAC')) {
			alert('이미 존재하는 MAC 입니다.');
		}
	}
</script>

{% endblock %}
<script>


</script>
{% block script %}
<script src="../assets/plugins/parsleyjs/dist/parsley.min.js"></script>
<script src="../assets/plugins/highlight.js/highlight.min.js"></script>
<script src="../assets/js/demo/render.highlight.js"></script>
{% endblock %}