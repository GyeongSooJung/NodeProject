{% extends 'layout.html' %}

{% block css %}
<link href="../assets/plugins/datatables.net-bs4/css/dataTables.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-responsive-bs4/css/responsive.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-buttons-bs4/css/buttons.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-autofill-bs4/css/autoFill.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-colreorder-bs4/css/colReorder.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-keytable-bs4/css/keyTable.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-rowreorder-bs4/css/rowReorder.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/datatables.net-select-bs4/css/select.bootstrap4.min.css" rel="stylesheet" />
<link href="../assets/plugins/switchery/switchery.min.css" rel="stylesheet" />
{% endblock %}

{% block content %}
<!-- begin #content -->
<div id="content" class="content">
	<!-- begin page-header -->
	<h1 class="page-header">사업자 목록</h1>
	<!-- end page-header -->
	<!-- begin panel -->
	<!--장비-->
	{% if devices %}
	<div class="panel panel-inverse">
		<!-- begin panel-heading -->
		<div class="panel-heading">
			<h4 class="panel-title">{{companyone.CNA}} - 장비</h4>
		</div>
		<!-- end panel-heading -->
		<!-- begin panel-body -->
		<div class="panel-body">
			
			<div class="mt-2 mb-2 d-flex justify-content-end align-items-center">
            	<div class="mr-2">검색 : </div>
				<div><input type="text" id="keyword" class="form-control"  /></div>
			</div>
			
			<div class="overflow-auto">
				<table id="data-table-combine" class="table table-striped table-bordered table-td-valign-middle text-center">
					<!--장치-->
					<center>
			            <div class="btn-group m-b-5 mx-3">
			               <a href="/company_list" class="btn btn-primary text-white px-4">목록으로</a>
			            </div>
			        </center>
					<thead>
						<tr>
							<th width="1%">
								<input type="checkbox" class="neHeros" value="" onChange="allCheckedBox(this);"/>
							</th>
							<th width="2.5%"></th>
							<th>모델명</th>
							<th>버전</th>
							<th>맥 주소</th>
							<th>별칭</th>
							<th width="1%"></th>
						</tr>
					</thead>
					<tbody>
    					{% if (totalNum == 0) %}
						<tr>
							<td colspan="7">No Data</td>
						</tr>
						{% else %}	
						{% set count = 0 %}
							{% for device in devices %}
							<tr>
								<td class="with-btn" nowrap>
									<input id ="ck" type="checkbox" name = "ck" class="neHeros" value={{device.MAC}} onChange="eachCheckedBox(this);"/>
								</td>
								<td class="font-weight-bold">{{totalNum - count - (currentPage*10)}} </td>
		  							{% set totalNum = totalNum - 1 %}
								<td>{{device.MD}}</td>
								<td>{{device.VER}}</td>
								<td>{{device.MAC}}</td>
								<td>{{device.NN}}</td>
								<td class="with-btn" nowrap>
									<a href="/device_edit/{{device.MAC}}" class="btn btn-sm btn-primary width-60 m-r-2 edit-btn">수정</a>
									<a href="javascript:delete_one('{{device.MAC}}')" class="btn btn-sm btn-white width-60">삭제</a>
								</td>
							</tr>
							{% endfor %}
						{% endif %}
					</tbody>
				</table>
			</div>
			<div class="d-flex justify-content-end align-item-center">
				<a href="javascript:pageDoubleBtn('left', 'DEVICE')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-left"></i></a>
				<a href="javascript:pageBtn('left', 'DEVICE')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-left"></i></a>
				{% if (totalNum==0) %}
				{% else %}
					{% for i in range(startPage, endPage) %}
					<a href="/company_list/?DEVICE={{companyone._id}}&page={{i}}" class="btn btn-white mr-1 px-2 text-primary" style="{% if(currentPage==i} %} background-color: #00acac; color: white !important; {% endif %} ">{{i+1}}</a>
					{% endfor %}
				{% endif %}
				<a href="javascript:pageBtn('right', 'DEVICE')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-right"></i></a>
				<a href="javascript:pageDoubleBtn('right', 'DEVICE')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-right"></i></a>
			</div>
		</div>
		<!-- end panel-body -->
	</div>
	<!-- end panel -->
	
	<!--begin pannel-->
	<!--차량-->
	{% elif cars %}
	<div class="panel panel-inverse">
		<!-- begin panel-heading -->
		<div class="panel-heading">
			<h4 class="panel-title">{{companyone.CNA}} - 차량</h4>
		</div>
		<!-- end panel-heading -->
		<!-- begin panel-body -->
		<div class="panel-body">
			
			<div class="mt-2 mb-2 d-flex justify-content-end align-items-center">
            	<div class="mr-2">검색 : </div>
				<div><input type="text" id="keyword" class="form-control"  /></div>
			</div>
			
			<div class="overflow-auto">
				<table id="data-table-combine" class="table table-striped table-bordered table-td-valign-middle text-center">
					<center>
			            <div class="btn-group m-b-5 mx-3">
			               <a href="/company_list" class="btn btn-primary text-white px-4">목록으로</a>
			            </div>
			        </center>
					<thead>
						<tr>
							<th width="1%">
								<input type="checkbox" class="neHeros" value="" onChange="allCheckedBox(this);"/>
							</th>
							<th width="2.5%"></th>
							<th>차종</th>
							<th>차량 번호</th>
							<th>차대 번호</th>
							<th>등록 일자</th>
							<th>수정 일자</th>
							<th width="1%"></th>
						</tr>
					</thead>
					<tbody>		
    					{% if (totalNum == 0) %}
						<tr>
							<td colspan="7">No Data</td>
						</tr>
						{% else %}
						{% set count = 0 %}
							{% for car in cars %}
							<tr>
    							<td class="with-btn" nowrap>
									<input id ="ck" type="checkbox" name = "ck" class="neHeros" value={{car.CN}} onChange="eachCheckedBox(this);"/>
    							</td>
    							<td class="font-weight-bold">{{totalNum - count - (currentPage*10)}} </td>
	  							{% set totalNum = totalNum - 1 %}
    							{% if car.CC == 1 %}
									<td>경차</td>
								{% elif car.CC == 2 %}
									<td>소형</td>
								{% elif car.CC == 3 %}
									<td>중형</td>
								{% elif car.CC == 4 %}
									<td>대형</td>
								{% elif car.CC == 5 %}
									<td>SUV</td>
								{% elif car.CC == 6 %}
									<td>승합</td>
								{% elif car.CC == 7 %}
									<td>상용</td>
								{% elif car.CC == 8 %}
									<td>전기</td>
								{% elif car.CC == 6 %}
									<td>외제</td>
								{% else %}
									<td>선택안됨</td>
								{% endif %}
								<td>{{car.CN}}</td>
								{% if car.SN %}
								<td>{{car.SN}}</td>
								{% else %} <td>선택안됨 </td>
								{% endif %}
								
								<td>
									<script>
							        Timefunction("{{car.CA}}");
									</script>
								</td>
								<td>
									<script>
									Timefunction("{{car.UA}}");
									</script>
								</td>
								<td class="with-btn" nowrap>
									<a href="/car_edit/{{car.CN}}" class="btn btn-sm btn-primary width-60 m-r-2">수정</a>
									<a href="javascript:delete_one('{{car.CN}}')" class="btn btn-sm btn-white width-60">삭제</a>
								</td>
							</tr>
							{% endfor %}
						{% endif %}
					</tbody>
				</table>
			</div>
			<div class="d-flex justify-content-end align-item-center">
				<a href="javascript:pageDoubleBtn('left', 'CAR')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-left"></i></a>
				<a href="javascript:pageBtn('left', 'CAR')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-left"></i></a>
				{% if (totalNum==0) %}
				{% else %}
					{% for i in range(startPage, endPage) %}
					<a href="/company_list/?CAR={{companyone._id}}&page={{i}}" class="btn btn-white mr-1 px-2 text-primary" style="{% if(currentPage==i} %} background-color: #00acac; color: white !important; {% endif %} ">{{i+1}}</a>
					{% endfor %}
				{% endif %}
				<a href="javascript:pageBtn('right', 'CAR')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-right"></i></a>
				<a href="javascript:pageDoubleBtn('right', 'CAR')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-right"></i></a>
			</div>
		</div>
		<!-- end panel-body -->
	</div>
	<!-- end panel -->
	
	<!--begin pannel-->
	<!--작업자-->
	{% elif workers %}
	<div class="panel panel-inverse">
		<!-- begin panel-heading -->
		<div class="panel-heading">
			<h4 class="panel-title">{{companyone.CNA}} - 작업자</h4>
		</div>
		<!-- end panel-heading -->
		<!-- begin panel-body -->
		<div class="panel-body">
			
			<div class="mt-2 mb-2 d-flex justify-content-end align-items-center">
            	<div class="mr-2">검색 : </div>
				<div><input type="text" id="keyword" class="form-control"  /></div>
			</div>
			
			<div class="overflow-auto">
				<table id="data-table-combine" class="table table-striped table-bordered table-td-valign-middle text-center">
					<center>
			            <div class="btn-group m-b-5 mx-3">
			               <a href="/company_list" class="btn btn-primary text-white px-4">목록으로</a>
			            </div>
			        </center>					
					<thead>
						<tr>
							<th width="1%"><input type="checkbox" class="neHeros" value="" onChange="allCheckedBox(this);"/></th>
							<th width="2.5%"></th>
							<th width="2.5%" data-orderable="false"></th>
							<th>이름</th>
							<th>전화번호</th>
							<th>이메일</th>
							<th width="10%">사업주권한</th>
							<th width="10%">승인</th>
							<th width="1%"></th>
						</tr>
					</thead>
					<tbody>
    					{% if (totalNum == 0) %}
						<tr>
							<td colspan="9">No Data</td>
						</tr>
						{% else %}	
						{% set count = 0 %}
							{% for worker in workers %}
    						<tr>
    							<td class="with-btn" nowrap>
									<input id ="ck" type="checkbox" name="ck" class="neHeros" value={{worker.EM}} unchecked onChange="eachCheckedBox(this);"/>
								</td>
								<td class="font-weight-bold">{{totalNum - count - (currentPage*10)}} </td>
								{% set totalNum = totalNum - 1 %}
								<td class="with-img"><img src={{worker.PU}} class="img-rounded height-30" /></td>
								<td>{{worker.WN}}</td>
								<td>{{worker.PN}}</td>
								<td>{{worker.EM}}</td>
    							    <input type="hidden" name="EM" value="{{worker.EM}}">
								<td class="with-btn" nowrap>
									<input class ="ck_au" type="checkbox" data-render="switchery" data-theme="black" value ="{{worker.EM}}"  {% if worker.AU == 1 %} checked {% else %} unchecked  {% endif %} />
									
								</td>
								<td class="with-btn" nowrap>
									<input class ="ck_ac" type="checkbox" data-render="switchery" data-theme="default" value ="{{worker.EM}}"  {% if worker.AC == 1 %} checked {% else %} unchecked  {% endif %} />
									
								</td>
								<td>
									<a class="btn btn-sm btn-white width-60" href="javascript:delete_one('{{worker.EM}}')">삭제</a>
									<!--<a class="btn btn-sm btn-white width-60" onclick ="confirm({{worker.EM}})">Delete</a>-->
								</td>
							</tr>
							{% endfor %}
						{% endif %}
					</tbody>
    			</table>
			</div>
			<div class="d-flex justify-content-end align-item-center">
				<a href="javascript:pageDoubleBtn('left', 'WORKER')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-left"></i></a>
				<a href="javascript:pageBtn('left', 'WORKER')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-left"></i></a>
				{% if (totalNum==0) %}
				{% else %}
					{% for i in range(startPage, endPage) %}
					<a href="/company_list/?WORKER={{companyone._id}}&page={{i}}" class="btn btn-white mr-1 px-2 text-primary" style="{% if(currentPage==i} %} background-color: #00acac; color: white !important; {% endif %} ">{{i+1}}</a>
					{% endfor %}
				{% endif %}
				<a href="javascript:pageBtn('right', 'WORKER')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-right"></i></a>
				<a href="javascript:pageDoubleBtn('right', 'WORKER')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-right"></i></a>
			</div>
		</div>
		<!-- end panel-body -->
	</div>
	<!-- end panel -->
	
	<!--begin pannel-->
	<!--소독이력-->
	{% elif historys %}
	<div class="panel panel-inverse">
		<!-- begin panel-heading -->
		<div class="panel-heading">
			<h4 class="panel-title">{{companyone.CNA}} - 소독이력</h4>
		</div>
		<!-- end panel-heading -->
		<!-- begin panel-body -->
		<div class="panel-body">
			
			<div class="mt-2 mb-2 d-flex justify-content-end align-items-center">
            	<div class="mr-2">검색 : </div>
				<div><input type="text" id="keyword" class="form-control"  /></div>
			</div>
			
			<div class="overflow-auto">
				<table id="data-table-combine" class="table table-striped table-bordered table-td-valign-middle text-center">
					<center>
			            <div class="btn-group m-b-5 mx-3">
			               <a href="/company_list" class="btn btn-primary text-white px-4">목록으로</a>
			            </div>
			        </center>    				
					<thead>
						<tr>
							<th width="1%">
								<input type="checkbox" class="neHeros" value="" onChange="allCheckedBox(this);"/>
							</th>
							<th width="2.5%"></th>
							<th class="text-nowrap">차량 번호</th>
							<th class="text-nowrap">장비 명</th>
						    <th class="text-nowrap">소독 일시</th>
							<th class="text-nowrap">등록 일시</th>
							<th class="text-nowrap">소독 시간</th>
							<th class="text-nowrap">소독 결과</th>
							<th class="text-nowrap">작업자</th>
							<th width="1%"></th>
						</tr>
					</thead>
					<tbody>
    					{% if (totalNum == 0) %}
						<tr>
							<td colspan="10">No Data</td>
						</tr>
						{% else %}
						{% set count = 0 %}
	    					{% for history in historys %}
							<tr onClick="location.href='/history_chart/{{history._id}}'" class="odd gradeX">
		  						<td onclick='event.cancelBubble=true;' class="with-btn" nowrap>
		 							<input id="ck" type="checkbox" name = "_id" class="neHeros" value={{history._id}} onChange="eachCheckedBox(this);"/>
		  						</td>
		  						<td class="font-weight-bold">{{totalNum - count - (currentPage*10)}} </td>
		  						{% set totalNum = totalNum - 1 %}
								<td>
								     	{% if history.CNM %}
										  <a href="/history_list/?CN={{history.CNM}}" class="dropdown-item">{{history.CNM}}</a>
										{% else %}
										  	N/A
										{% endif %}
								</td>
								
								<td>
										{% if history.DNM %}
										  	{{history.DNM}}
										{% else %}
										  	N/A
										{% endif %}
								</td>
								
								<td>
									<script>
									Timefunction("{{history.ET}}");
									</script>
								</td>
								<td>
									<script>
									Timefunction("{{history.CA}}");
									</script>
								</td>
								{% if (history.PD.length//60)==0  %}
								<td>{{history.PD.length%60+"s"}}</td>
								{% else %}
								<td>{{history.PD.length//60+"m "+history.PD.length%60+"s"}}</td>
								{% endif %}
								
								{% if history.RC == 1 %}
								<td>성공</td>
								{% else %}
								<td>실패</td>
								{% endif %}
								<td>
							    	{% if history.WNM %}
									  	{{history.WNM}}
									{% else %}
									  	N/A
									{% endif %}
								</td>
		  						<td>
		  							<a href="javascript:delete_one('{{history._id}}')" class="btn btn-sm btn-white width-60">삭제</a>
		  						</td>
							</tr>
							{% endfor %}
						{% endif %}
					</tbody>
				</table>
			</div>
			<div class="d-flex justify-content-end align-item-center">
				<a href="javascript:pageDoubleBtn('left', 'HISTORY')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-left"></i></a>
				<a href="javascript:pageBtn('left', 'HISTORY')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-left"></i></a>
				{% if (totalNum==0) %}
				{% else %}
					{% for i in range(startPage, endPage) %}
					<a href="/company_list/?HISTORY={{companyone._id}}&page={{i}}" class="btn btn-white mr-1 px-2 text-primary" style="{% if(currentPage==i} %} background-color: #00acac; color: white !important; {% endif %} ">{{i+1}}</a>
					{% endfor %}
				{% endif %}
				<a href="javascript:pageBtn('right', 'HISTORY')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-right"></i></a>
				<a href="javascript:pageDoubleBtn('right', 'HISTORY')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-right"></i></a>
			</div>
		</div>
		<!-- end panel-body -->
	</div>
	<!-- end panel -->
	
	<!--begin pannel-->
	<!--사업자-->
	{% else %}
	<div class="panel panel-inverse">
		<!-- begin panel-heading -->
		<div class="panel-heading">
			<h4 class="panel-title">업체</h4>
		</div>
		<!-- end panel-heading -->
		<!-- begin panel-body -->
		<div class="panel-body">
			
			<div class="mt-2 mb-2 d-flex justify-content-end align-items-center">
            	<div class="mr-2">검색 : </div>
				<div><input type="text" id="keyword" class="form-control"  /></div>
			</div>
			
			<div class="overflow-auto">
				<table id="data-table-combine" class="table table-striped table-bordered table-td-valign-middle text-center">	
						<thead>
							<tr>
								<th></th>
								<th class="text-nowrap">상호명</th>
							    <th class="text-nowrap">사업자 번호</th>
								<th class="text-nowrap">대표자</th>
								<th class="text-nowrap">회사 전화번호</th>
								<th class="text-nowrap">휴대폰 번호</th>
								<th class="text-nowrap">대표 이메일</th>
								<th class="text-nowrap">가입 일자</th>
								<th width="1%" class="text-nowrap">장비/차량/작업자/소독이력</th>
							</tr>
						</thead>
						<tbody>
							{% if (totalNum == 0) %}
							<tr>
								<td colspan="7">No Data</td>
							</tr>
							{% else %}
							{% set count = 0 %}
								{% for company in companys %}
								<tr class="odd gradeX">
									<td class="font-weight-bold">{{totalNum - count - (currentPage*10)}} </td>
				  							{% set totalNum = totalNum - 1 %}
									<td>{{company.CNA}}</td>
									<td>{{company.CNU}}</td>
									<td>{{company.NA}}</td>
									<td>{{company.PN}}</td>
									<td>{{company.MN}}</td>
									<td>{{company.EA}}</td>
									<td>
										<script>
											var cca = moment('{{company.CA}}').format('YYYY-MM-DD HH:mm');
											document.write(cca);
										</script>
									</td>
									<td class="d-flex flex-nowrap justify-content-around">
										<a href="/company_list/?DEVICE={{company._id}}"><button type="button" class="btn btn-primary mx-1 px-2"><i class="fas fa-lg fa-fw fa-microchip"></i></button></a>
										<a href="/company_list/?CAR={{company._id}}"><button type="button" onClick="location.href='/company_device/{{company._id}}" class="btn btn-info mx-1 px-2"><i class="fas fa-lg fa-fw fa-car"></i></button></a>
										<a href="/company_list/?WORKER={{company._id}}"><button type="button" onClick="location.href='/company_device/{{company._id}}" class="btn btn-warning mx-1 px-2"><i class="fas fa-lg fa-fw fa-user"></i></button></a>
										<a href="/company_list/?HISTORY={{company._id}}"><button type="button" onClick="location.href='/company_device/{{company._id}}" class="btn btn-danger mx-1 px-2"><i class="fas fa-lg fa-fw fa-history"></i></button></a>
									</td>
								</tr>
								{% endfor %}
							{% endif %}
						</tbody>
				</table>
			</div>
			<div class="d-flex justify-content-end align-item-center">
				<a href="javascript:pageDoubleBtn('left')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-left"></i></a>
				<a href="javascript:pageBtn('left')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-left"></i></a>
				{% if (totalNum==0) %}
				{% else %}
					{% for i in range(startPage, endPage) %}
					<a href="/company_list/?page={{i}}" class="btn btn-white mr-1 px-2 text-primary" style="{% if(currentPage==i} %} background-color: #00acac; color: white !important; {% endif %} ">{{i+1}}</a>
					{% endfor %}
				{% endif %}
				<a href="javascript:pageBtn('right')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-right"></i></a>
				<a href="javascript:pageDoubleBtn('right')" class="btn btn-primary mr-1 px-2"><i class="fas fa-angle-double-right"></i></a>
			</div>
		</div>
		<!-- end panel-body -->
	</div>
	<!-- end panel -->
	{% endif %}
	<a href ="/gstest"> 시험용 버튼입니다. 개발자 외에 클릭하지 마세요</a>
</div>
<!-- end #content -->

<!-- Script -->
<script src="http://code.jquery.com/jquery-1.10.2.js"></script>	

<script>
	// 검색 기능
	$(document).ready(function() {
        $("#keyword").keyup(function() {
            var k = $(this).val();
            $("#data-table-combine > tbody > tr").hide();
            var temp = $("#data-table-combine > tbody > tr > td:contains('" + k + "')");

            $(temp).parent().show();
        });
    });
    
    // 페이지 기능
	function pageBtn(dir, btn) {
		if(dir == 'left') {
			if(btn) {
				location = '/company_list/?'+btn+'={{companyone._id}}&page={{currentPage-1}}';
			}
			else {
				location = '/company_list/?page={{currentPage-1}}';
			}
		}
		if(dir == 'right') {
			if(btn) {
				location = '/company_list/?'+btn+'={{companyone._id}}&page={{currentPage+1}}';
			}
			else {
				location = '/company_list/?page={{currentPage+1}}';
			}
		}
	}
	
	function pageDoubleBtn(dir, btn) {
		if(dir == 'left') {
			if(btn) {
				location = '/company_list/?'+btn+'={{companyone._id}}&page={{startPage-1}}';
			}
			else {
				location = '/company_list/?page={{startPage-1}}';
			}
		}
		if(dir == 'right') {
			if(btn) {
				location = '/company_list/?'+btn+'={{companyone._id}}&page={{endPage+1}}';
			}
			else {
				location = '/company_list/?page={{endPage+1}}';
			}
		}
	}
	
	// 전체 선택 기능
	function allCheckedBox(obj) {
	   	// @brief 선택한 체크박스의 클래스 명칭을 가져온다.
	   	const termClass = obj.getAttribute("class");
	   	// @brief 선택한 클래스명과 같은 클래스의 갯수
	   	console.log(document.getElementsByClassName(termClass).length);
	   	Array.prototype.forEach.call(document.getElementsByClassName(termClass), function(element, index, array) {
	        // @brief 엘리먼트의 값 출력
	        console.log(element.value);
	        // @brief 선택한 클래스의 첫번째 checkbox의 상태가 체크가 되있는 경우
	        if(document.getElementsByClassName(termClass)[0].checked == true) {
	            // @brief 같은 클래스명을 가진 모든 checkbox의 상태를 선택 완료 처리 한다.
	            element.checked = true;
	        }
	        // @brief 선택한 클래스의 첫번째 checkbox의 상태가 체크가 해제된 경우
	        else {
	            // @brief 같은 클래스명을 가진 모든 checkbox의 상태를 선택 해제 처리 한다.
	            element.checked = false;
	        }
	   	});
    }

	// 항목 선택 기능
	function eachCheckedBox(obj) {
      // @brief 선택한 체크박스의 상태가 선택해제인 경우
      if(obj.checked == false) {
            // @brief 선택한 체크박스의 클래스 명칭을 가져온다.
            const termClass = obj.getAttribute("class");
            // @brief 첫번째 checkbox의 상태가 체크가 되어있는경우
            if(document.getElementsByClassName(termClass)[0].checked == true) {
                // @brief 첫번째 checkbox의 상태를 체크해제한다.
                document.getElementsByClassName(termClass)[0].checked = false;
            }
        }
    }
    
    // ajax 기능
	$(document).ready(function(){
        $('.ck_au').change(function() {
           var post = 'POST METHOD CALL';
           var email = $(this).val();
			
	        if($(this).is(":checked")){
                //Ajax POST Method TEST
                $.ajax({
                    url: '/ajax/post',
                      dataType: 'json',
                      type: 'POST',
                      data: {au_true:email},
                      success: function(result) {
                          if (result) {
                             $('#post_output').html(result.result);
                          }
                      }
				});
	        }
	        else {
                //Ajax POST Method TEST
                $.ajax({
                    url: '/ajax/post',
                      dataType: 'json',
                      type: 'POST',
                      data: {au_false:email},
                      success: function(result) {
                          if (result) {
                             $('#post_output').html(result.result);
                          }
                      }
				});
	        }
        });
    });
	
	// ajax 기능2
	$(document).ready(function(){         
		$('.ck_ac').change(function() {
           var post = 'POST METHOD CALL';
           var email = $(this).val();
			
			if($(this).is(":checked")){
			 	console.log("@@@@@");
			    //Ajax POST Method TEST
			    $.ajax({
			        url: '/ajax/post',
			          dataType: 'json',
			          type: 'POST',
			          data: {ac_true:email},
			          success: function(result) {
			              if (result) {
			                 $('#post_output').html(result.result);
			              }
			          }
				});
			}
			else {
			    //Ajax POST Method TEST
			    $.ajax({
			        url: '/ajax/post',
			          dataType: 'json',
			          type: 'POST',
			          data: {ac_false:email},
			          success: function(result) {
			              if (result) {
			                 $('#post_output').html(result.result);
			              }
			          }
				});
			}
        });
   });
</script>

{% endblock %}

{% block script %}
<script src="../assets/plugins/datatables.net/js/jquery.dataTables.min.js"></script>
<script src="../assets/plugins/datatables.net-bs4/js/dataTables.bootstrap4.min.js"></script>
<script src="../assets/plugins/datatables.net-responsive/js/dataTables.responsive.min.js"></script>
<script src="../assets/plugins/datatables.net-responsive-bs4/js/responsive.bootstrap4.min.js"></script>
<script src="../assets/plugins/switchery/switchery.min.js"></script>
<script src="../assets/js/demo/form-slider-switcher.demo.js"></script>
<!--<script src="../assets/js/demo/table-manage-default.demo.js"></script>-->
{% endblock %}